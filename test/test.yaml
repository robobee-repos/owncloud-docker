version: '3.1'

services:

  owncloud:
    image: erwin82/owncloud:latest
    user: "33:33"
    links:
      - db
      - redis
    volumes:
      - ${ROOT_DIR}/html:/var/www/html
      - ${ROOT_DIR}/data:/data

  redis:
    image: erwin82/redis-unpriv:latest
    ports:
      - 6379:6379

  db:
    image: bitnami/mariadb:latest
    environment:
      ALLOW_EMPTY_PASSWORD: "no"
      MARIADB_ROOT_USER: "root"
      MARIADB_ROOT_PASSWORD: "sum0cee3iishi5ahcae2Yahfaiy9zoev"
    volumes:
      - ${ROOT_DIR}/bitnami/mariadb:/bitnami/mariadb

  nginx:
    image: erwin82/nginx:latest
    command: ls -al /var/run/
    ports:
      - 8080:8080
    links:
      - owncloud
    volumes:
      - ${NGINX_CONF_DIR}:/nginx-in
      - ${ROOT_DIR}/html:/var/www/html
